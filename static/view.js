(function(){var confirm,confirmCallback,createCookie,dataURItoBlob,guid,readCookie,s4,switchTheme;readCookie=function(name){var c,ca,nameEQ,_i,_len;nameEQ=name+"=";ca=document.cookie.split(';');for(_i=0,_len=ca.length;_i<_len;_i++){c=ca[_i];while(c.charAt(0)===' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}return null;};window.readCookie=readCookie;createCookie=function(name,value,days){var date,expires;if(days){date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));expires="; expires="+date.toGMTString();}else expires="; expires=Thu, 01-Jan-1970 00:00:01 GMT";return document.cookie=name+"="+value+expires+"; path=/";};window.createCookie=createCookie;dataURItoBlob=function(uri){var ab,byteString,i,ia,mimeString,_i,_ref;byteString=atob(uri.split(',')[1]);mimeString=uri.split(',')[0].split(':')[1].split(':')[0];ab=new ArrayBuffer(byteString.length);ia=new Uint8Array(ab);for(i=_i=0,_ref=byteString.length;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type:'image/png'});};window.dataURItoBlob=dataURItoBlob;switchTheme=function(){if(readCookie('dark_theme'))createCookie('dark_theme','',-1);else createCookie('dark_theme',1,3650);return window.location.href=window.location.href;};window.switchTheme=switchTheme;confirmCallback=null;window.addEventListener('DOMContentLoaded',function(){var dialogNo,dialogYes,feedback,feedbackSend,feedbackToggle;if(document.getElementById('feedback')!==null){feedback=document.getElementById('feedback').querySelector('div');feedbackToggle=document.getElementById('toggle-feedback');if(feedbackToggle)feedbackToggle.addEventListener('click',function(e){e.preventDefault();if(feedbackToggle.parentElement.className.indexOf('active')===-1){feedbackToggle.parentElement.classList.add('active');return feedback.querySelector('textarea').focus();}else return feedbackToggle.parentElement.classList.remove('active');},false);feedbackSend=document.getElementById('send-feedback');if(feedbackSend)feedbackSend.addEventListener('click',function(e){var feedbackText,formData,xhr;e.preventDefault();feedbackText=document.getElementById('feedback-text');xhr=new XMLHttpRequest();formData=new FormData();xhr.open('POST','/api/feedback');formData.append('feedback',feedbackText.value);xhr.onload=function(){var result;result=(function(){switch(this.status){case 200:return "Thanks! We read every one of these. Keep in mind, though, this feedback is anonymous. <a href='mailto:support@mediacru.sh'>Email us</a> if you want a response.";case 420:return "Sorry, you can't send more feedback today. Try again in 24 hours!";case 413:return "Sorry, that feedback is too long.";default:return "Sorry, something unexpected happened.";}}).call(this);return feedback.innerHTML="<p>"+result+"</p>";};return xhr.send(formData);},false);}dialogYes=document.querySelector('.dialog .yes');dialogNo=document.querySelector('.dialog .no');if(dialogYes!==null){dialogYes.addEventListener('click',function(e){e.preventDefault();if(confirmCallback)confirmCallback(true);confirmCallback=null;return document.querySelector('.dialog').classList.add('hidden');},false);return dialogNo.addEventListener('click',function(e){e.preventDefault();if(confirmCallback)confirmCallback(false);confirmCallback=null;return document.querySelector('.dialog').classList.add('hidden');},false);}},false);confirm=function(callback){confirmCallback=callback;document.querySelector('.dialog').classList.remove('hidden');return document.querySelector('.dialog .no').focus();};window.confirm=confirm;window.addEventListener('keydown',function(e){if(confirmCallback===null)return;if(e.keyCode===27){if(confirmCallback)confirmCallback(false);confirmCallback=null;return document.querySelector('.dialog').classList.add('hidden');}},false);s4=function(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);};guid=function(){return s4()+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+'-'+s4()+s4()+s4();};window.guid=guid;window.getPosition=function(e){var x,y;x=0;y=0;while(true){x+=e.offsetLeft;y+=e.offsetTop;if(e.offsetParent===null)break;e=e.offsetParent;}return [x,y];};window.addEventListener('DOMContentLoaded',function(e){var link,_i,_len,_ref,_results;_ref=document.querySelectorAll('.ad-opt-out');_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){link=_ref[_i];_results.push(link.addEventListener('click',function(e){var a,ad,_j,_k,_l,_len1,_len2,_len3,_ref1,_ref2,_ref3,_results1;e.preventDefault();if(readCookie('ad-opt-out')){e.target.textContent='opt-out';_ref1=document.querySelectorAll('.ad-state');for(_j=0,_len1=_ref1.length;_j<_len1;_j++){a=_ref1[_j];a.textContent='opted-in';}createCookie('ad-opt-out','',-1);}else{e.target.textContent='opt-in';_ref2=document.querySelectorAll('.ad-state');for(_k=0,_len2=_ref2.length;_k<_len2;_k++){a=_ref2[_k];a.textContent='opted-out';}createCookie('ad-opt-out',1,3650);}_ref3=document.querySelectorAll('.advertisement');_results1=[];for(_l=0,_len3=_ref3.length;_l<_len3;_l++){ad=_ref3[_l];_results1.push(ad.innerHTML="Sorry! You won't see any ads again. If you change your mind, <a href='/advertising'>opt-in here</a>.");}return _results1;},false));}return _results;},false);if(!window.embedded)console.log("  -++++:--`                  \n -hddddddddhy+/.             \n-hddddddddddddddhy/.         \n`ydddddddddddddddddddy+`      \n+ddddddhsoooshyooooydddhs:    \nddddddo`     `      ydddddy:  \ndddddh` `yh+  :hy.  yddddddds`  Want to read the unobsfucated source? Check it out\nddddds  :dd:  sdy` .hddddddddh  at https://github.com/MediaCrush/MediaCrush\nddddd/  odh. `hdo  /dddddddh+`\nhdddh. `hds  :dh:  sddddddy-    Send us some pull requests!\n/dddhsssddyssydhssshdddh+-    \n`ydddddddddddddddddddy+`      \n-hddddddddddddddhy/.         \n -hdddddddddyo/-`            \n  -++++/--``                 ");}).call(this);(function(){Array.prototype.remove=function(from,to){var rest,_ref;rest=this.slice((to||from)+1||this.length);this.length=(_ref=from<0)!=null?_ref:this.length+{from:from};return this.push.apply(this,rest);};Array.prototype.contains=function(a){var i,_i,_ref;for(i=_i=0,_ref=this.length;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i)if(this[i]===a)return true;return false;};if(!("classList" in document.documentElement)&&Object.defineProperty&&typeof HTMLElement!=='undefined')Object.defineProperty(HTMLElement.prototype,'classList',{get:function(){var self=this;function update(fn){return function(value){var classes=self.className.split(/\s+/),index=classes.indexOf(value);fn(classes,index,value);self.className=classes.join(" ");};}var ret={add:update(function(classes,index,value){~index||classes.push(value);}),remove:update(function(classes,index){~index&&classes.splice(index,1);}),toggle:update(function(classes,index,value){~index?classes.splice(index,1):classes.push(value);}),contains:function(value){return !!~self.className.split(/\s+/).indexOf(value);},item:function(i){return self.className.split(/\s+/)[i]||null;}};Object.defineProperty(ret,'length',{get:function(){return self.className.split(/\s+/).length;}});return ret;}});;}).call(this);(function(){window.UserHistory=(function(){var historyEnabled,self,userHistory;self=this;userHistory=[];historyEnabled=true;self.getHistory=function(){return userHistory;};self.getHistoryEnabled=function(){return historyEnabled;};historyEnabled=readCookie('hist-opt-out')===null;userHistory=JSON.parse(window.localStorage.getItem('history'));if(!userHistory)userHistory=[];self.save=function(){return window.localStorage.setItem('history',JSON.stringify(userHistory));};self.add=function(hash){var item,_i,_len;if(!historyEnabled)return;for(_i=0,_len=userHistory.length;_i<_len;_i++){item=userHistory[_i];if(item===hash)return item;}userHistory.push(hash);return self.save();};self.clear=function(){userHistory=[];return self.save();};self.remove=function(hash){var i,_i,_ref;for(i=_i=0,_ref=userHistory.length;0<=_ref?_i<=_ref:_i>=_ref;i=0<=_ref?++_i:--_i)if(userHistory[i]===hash){userHistory.splice(i,1);break;}return self.save();};self.toggleHistoryEnabled=function(){if(historyEnabled)createCookie('hist-opt-out','1',3650);else createCookie('hist-opt-out','',0);historyEnabled=!historyEnabled;return historyEnabled;};self.loadDetailedHistory=function(items,callback){var hashes,xhr;if(items.length===0)callback([]);hashes=items.join(',');xhr=new XMLHttpRequest();xhr.open('GET','/api/info?list='+hashes);xhr.onload=function(){if(xhr.status!==200){document.getElementById('items').innerHTML='There was an error showing your history, sorry.';return;}if(callback)return callback(JSON.parse(this.response));};return xhr.send();};return self;})();}).call(this);(function(){var API;(function(xhr){var open;open=XMLHttpRequest.prototype.open;return xhr.prototype.open=function(){open.apply(this,arguments);return this.setRequestHeader('X-Requested-With','XMLHttpRequest');};})(XMLHttpRequest);API=(function(){var self;self=this;self.uploadFile=function(file,progress,callback){var formData,xhr;xhr=new XMLHttpRequest();xhr.open('POST','/api/upload/file');xhr.upload.onprogress=progress;xhr.onload=function(){var error,response;switch(this.status){case 415:error="This media format is not supported.";break;case 420:error="You're uploading too much! Try again later.";break;case 409:response=JSON.parse(this.responseText);file.isUserOwned=false;file.hash=response.hash;file.isHashed=true;file.updateStatus('done');break;case 200:response=JSON.parse(this.responseText);file.isUserOwned=true;file.hash=response.hash;file.isHashed=true;file.updateStatus('pending');}if(error!=null){if(callback)return callback({error:error});}else if(callback)return callback({file:file});};formData=new FormData();formData.append('file',file.file);return xhr.send(formData);};self.uploadUrl=function(file,callback){var formData,xhr;xhr=new XMLHttpRequest();xhr.open('POST','/api/upload/url');file.updateStatus('uploading');file.preview.querySelector('.progress').style.width='100%';xhr.onload=function(){var error,response;switch(this.status){case 400:error="This URL is not valid.";break;case 404:error="That URL does not exist, so far as we can tell.";break;case 409:response=JSON.parse(this.responseText);file.isUserOwned=false;file.hash=response.hash;file.isHashed=true;file.updateStatus('done');break;case 413:error="This file is too large.";break;case 415:error="This filetype is not supported.";break;case 420:error="You're uploading too much! Try again later.";break;case 200:response=JSON.parse(this.responseText);file.isUserOwned=true;file.hash=response.hash;file.isHashed=true;file.updateStatus('pending');}if(error)if(callback)callback({file:file,error:error});if(callback)return callback({file:file});};formData=new FormData();formData.append('url',file.file);return xhr.send(formData);};self.checkExists=function(file,callback){var xhr;xhr=new XMLHttpRequest();xhr.open('GET',"/api/"+file.hash+"/exists");xhr.onload=function(){var response;response=JSON.parse(this.responseText);if(callback)return callback(response.exists);};return xhr.send();};self.checkStatus=function(files,callback){var xhr;xhr=new XMLHttpRequest();xhr.open('GET',"/api/status?list="+files);xhr.onload=function(){var response;response=JSON.parse(this.responseText);if(callback)return callback(response);};return xhr.send();};self.deleteFile=function(file){var xhr;xhr=new XMLHttpRequest();xhr.open('DELETE',"/api/"+file);xhr.send();return UserHistory.remove(file);};self.setFlags=function(file,flags){var flag,formData,value,xhr;xhr=new XMLHttpRequest();formData=new FormData();for(flag in flags){value=flags[flag];formData.append(flag,value);}xhr.open('POST',"/api/"+file+"/flags");return xhr.send(formData);};self.createAlbum=function(files,callback){var formData,xhr;xhr=new XMLHttpRequest();formData=new FormData();formData.append('list',files.join(','));xhr.open('POST','/api/album/create');xhr.onload=function(){var result;if(this.status!==200)if(callback)callback({error:true});result=JSON.parse(this.responseText);if(result.error!=null)if(callback)callback({error:true});if(callback)return callback({hash:result.hash});};return xhr.send(formData);};self.zipAlbum=function(hash,callback){var formData,xhr;xhr=new XMLHttpRequest();formData=new FormData();formData.append('hash',hash);xhr.open('POST','/api/album/zip');xhr.onload=function(){var result;if(this.status!==200)if(callback)callback({error:true});result=JSON.parse(this.responseText);if(result.error!=null)if(callback)callback({error:true});if(callback)return callback(result);};return xhr.send(formData);};self.reportFile=function(file){var xhr;xhr=new XMLHttpRequest();xhr.open('POST',"/report/"+window.filename);return xhr.send();};self.setText=function(hash,title,description,callback){var formData,xhr;xhr=new XMLHttpRequest();formData=new FormData();formData.append('title',title);formData.append('description',description);xhr.open('POST',"/api/"+hash+"/text");xhr.onload=function(){if(callback)return callback(self);};return xhr.send(formData);};return self;})();if(typeof window!=="undefined"&&window!==null)window.API=API;}).call(this);(function(){var MediaPlayer,subtitleRenderers;subtitleRenderers={};document.cancelFullScreen=document.cancelFullScreen||document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen;MediaPlayer=function(container){var adjustVolumeProgress,adjustingVolume,beginAdjustVolume,beginSeek,controls,debounce,endAdjustVolume,endSeek,event,ex,fullscreen,id,idleDebounce,idleEvent,idleUI,isAudio,isFullscreen,isVideo,leaveFullscreen,media,playPause,prefix,rate,rates,ready,seek,seekClick,seekProgress,seeking,startButton,timeout,toggleLoop,toggleSubs,updateMedia,volume,volumeClick,volumeIcon,wasPaused,_i,_j,_k,_len,_len1,_len2,_ref,_ref1;media=container.querySelector('video, audio');id=container.getAttribute('data-media');isVideo=media.tagName==='VIDEO';isAudio=media.tagName==='AUDIO';controls=container.querySelector('.controls');playPause=container.querySelector('.play-pause');startButton=container.querySelector('.start');fullscreen=container.querySelector('.fullscreen');isFullscreen=false;toggleLoop=container.querySelector('.loop');toggleSubs=container.querySelector('.subtitles');rates=container.querySelectorAll('.speeds a');seek=container.querySelector('.seek');volume=container.querySelector('.volume > div');ready=false;media.controls=false;if(isVideo){window.mediaSizeReporter=function(){return{width:media.videoWidth,height:media.videoHeight};};setTimeout(function(){if(window.updateSize!=null)return window.updateSize();},500);}updateMedia=function(){var loaded,s,_i,_len,_ref;if(!ready){ready=true;_ref=seek.querySelectorAll('.hidden');for(_i=0,_len=_ref.length;_i<_len;_i++){s=_ref[_i];s.classList.remove('hidden');}seek.querySelector('.progress').classList.add('hidden');}if(window.embedded)if(window.updateSize!=null)window.updateSize(media.videoWidth,media.videoHeight);if(media.buffered.length===0)loaded=100;else loaded=media.buffered.end(media.buffered.length-1)/media.duration*100;seek.querySelector('.loaded').style.width=loaded+'%';seek.querySelector('.played').style.width=media.currentTime/media.duration*100+'%';if(media.ended&&(startButton!=null))startButton.classList.remove('hidden');if(media.paused){if(isVideo)controls.classList.add('fixed');playPause.classList.remove('pause');return playPause.classList.add('play');}else{if(isVideo)controls.classList.remove('fixed');playPause.classList.remove('play');playPause.classList.add('pause');if(startButton!=null)return startButton.classList.add('hidden');}};updateMedia();_ref=['progress','timeupdate','pause','playing','seeked','ended','loadedmetadata'];for(_i=0,_len=_ref.length;_i<_len;_i++){event=_ref[_i];media.addEventListener(event,function(e){if(media.readyState>=3||ready)return updateMedia();},false);}if(toggleSubs)toggleSubs.addEventListener('click',function(e){e.preventDefault();if(container.className.indexOf('subs-off')===-1){if(subtitleRenderers[id]!=null)subtitleRenderers[id].disableSubs();container.classList.add('subs-off');toggleSubs.querySelector('.icon').classList.add('disabled');return toggleSubs.querySelector('.text').textContent='Subtitles OFF';}else{if(subtitleRenderers[id]!=null)subtitleRenderers[id].enableSubs();container.classList.remove('subs-off');toggleSubs.querySelector('.icon').classList.remove('disabled');return toggleSubs.querySelector('.text').textContent='Subtitles ON';}},false);if(volume!==null){volumeIcon=volume.parentElement.querySelector('.icon');volumeIcon.addEventListener('click',function(e){e.preventDefault();return media.muted=!media.muted;},false);media.addEventListener('volumechange',function(e){var iconSymbol,_ref1;if(media.muted){volume.parentElement.classList.add('muted');return volumeIcon.setAttribute('data-icon','\uF038');}else{volume.parentElement.classList.remove('muted');if(media.volume>0.66)iconSymbol='\uF03B';else if((0.33<(_ref1=media.volume)&&_ref1<=0.66))iconSymbol='\uF03A';else iconSymbol='\uF039';return volumeIcon.setAttribute('data-icon',iconSymbol);}},false);adjustingVolume=false;beginAdjustVolume=function(e){e.preventDefault();adjustingVolume=true;return adjustVolumeProgress(e);};adjustVolumeProgress=function(e){var amount,ex,height,width;e.preventDefault();if(!adjustingVolume)return;if(isVideo){height=volume.querySelector('.background').clientHeight;if(e.offsetY!=null)amount=(height-e.offsetY)/height;else amount=(height-e.layerY)/height;volume.querySelector('.amount').style.height=amount*100+'%';}else{width=volume.querySelector('.background').clientWidth;if(e.offsetX!=null)amount=e.offsetX/width;else amount=e.layerX/width;volume.querySelector('.amount').style.width=amount*100+'%';}media.volume=amount;try{return window.localStorage.volume=amount;}catch(_error){ex=_error;}};endAdjustVolume=function(e){e.preventDefault();return adjustingVolume=false;};try{if(window.localStorage.volume!=null){media.volume=window.localStorage.volume;if(isVideo)volume.querySelector('.amount').style.height=window.localStorage.volume*100+'%';else volume.querySelector('.amount').style.width=window.localStorage.volume*100+'%';}}catch(_error){ex=_error;}volumeClick=volume.querySelector('.clickable');volumeClick.addEventListener('mousedown',beginAdjustVolume,false);volumeClick.addEventListener('mouseup',endAdjustVolume,false);volumeClick.addEventListener('mousemove',adjustVolumeProgress,false);volumeClick.addEventListener('mouseleave',endAdjustVolume,false);}if(isVideo){idleDebounce=false;idleUI=function(){idleDebounce=true;controls.classList.add('idle');return media.classList.add('idle');};timeout=null;idleEvent=function(e){if(idleDebounce){idleDebounce=false;return false;}clearTimeout(timeout);controls.classList.remove('idle');media.classList.remove('idle');return true;};media.addEventListener('mousemove',function(e){if(idleEvent(e))return timeout=setTimeout(idleUI,3000);},false);controls.addEventListener('mousemove',idleEvent,false);}seeking=false;wasPaused=true;beginSeek=function(e){e.preventDefault();seeking=true;wasPaused=media.paused;media.pause();return seekProgress(e);};seekProgress=function(e){var amount;e.preventDefault();if(!seeking)return;if(e.offsetX!=null)amount=e.offsetX/seek.clientWidth;else amount=e.layerX/seek.clientWidth;return media.currentTime=media.duration*amount;};endSeek=function(e){e.preventDefault();if(!seeking)return;if(!wasPaused)media.play();return seeking=false;};seekClick=seek.querySelector('.clickable');seekClick.addEventListener('mousedown',beginSeek,false);seekClick.addEventListener('mouseup',endSeek,false);seekClick.addEventListener('mousemove',seekProgress,false);seekClick.addEventListener('mouseleave',endSeek,false);if(fullscreen!==null){debounce=true;_ref1=['','moz','webkit','ms'];for(_j=0,_len1=_ref1.length;_j<_len1;_j++){prefix=_ref1[_j];document.addEventListener(prefix+'fullscreenchange',function(e){if(debounce){debounce=false;return;}debounce=true;if(isFullscreen)return leaveFullscreen();},false);}fullscreen.addEventListener('click',function(e){e.preventDefault();if(!isFullscreen){isFullscreen=true;fullscreen.classList.add('disabled');if(container.requestFullScreen!=null)container.requestFullScreen();if(container.mozRequestFullScreen!=null)container.mozRequestFullScreen();if(container.webkitRequestFullScreen!=null)container.webkitRequestFullScreen();if(container.msRequestFullscreen!=null)container.msRequestFullscreen();container.classList.add('fullscreen');window.setTimeout(function(){if(subtitleRenderers[id]!=null)return subtitleRenderers[id].resize(media.offsetWidth,media.offsetHeight);},100);return timeout=setTimeout(idleUI,3000);}else return leaveFullscreen();},false);leaveFullscreen=function(){var _;isFullscreen=false;container.classList.remove('fullscreen');fullscreen.classList.remove('disabled');document.cancelFullScreen();_=document.querySelector('.media');if(_)_.style.right=0;return window.setTimeout(function(){if(_)_.style.right='-50%';if(subtitleRenderers[id]!=null)return subtitleRenderers[id].resize(media.offsetWidth,media.offsetHeight);},200);};}playPause.addEventListener('click',function(e){e.preventDefault();if(media.paused)return media.play();else return media.pause();},false);if(startButton!=null)startButton.addEventListener('click',function(e){e.preventDefault();return media.play();},false);toggleLoop.addEventListener('click',function(e){e.preventDefault();if(media.loop){media.loop=false;toggleLoop.querySelector('.icon').classList.add('disabled');return toggleLoop.querySelector('.text').textContent='Loop OFF';}else{media.loop=true;toggleLoop.querySelector('.icon').classList.remove('disabled');toggleLoop.querySelector('.text').textContent='Loop ON';if(media.ended){media.currentTime=0;return media.play();}}},false);for(_k=0,_len2=rates.length;_k<_len2;_k++){rate=rates[_k];rate.addEventListener('click',function(e){var speed;e.preventDefault();speed=parseFloat(e.target.getAttribute('data-speed'));container.querySelector('.speeds a.selected').classList.remove('selected');e.target.classList.add('selected');return media.playbackRate=speed;},false);}return window.resizeMedia=function(width,height){if(!isVideo)return;if(!ready)return;media.width=width;media.height=height-5;if(subtitleRenderers[id]!=null)return subtitleRenderers[id].resize(media.offsetWidth,media.offsetHeight);};};window.MediaPlayer=MediaPlayer;document.addEventListener('DOMContentLoaded',function(){var player,_i,_len,_ref,_results;_ref=document.querySelectorAll('.player.subtitled');_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){player=_ref[_i];_results.push((function(player){var ass,format,handleSubsReady,id,request,style,track,video;id=player.getAttribute('data-media');video=player.querySelector('video');track=video.querySelector('track');format=track.dataset.format;if(format==='ass'){style=document.getElementById('font-map-'+id);ass=null;handleSubsReady=function(video,ass){var height,renderer,width;if(video.readyState>=HTMLMediaElement.HAVE_METADATA&&ass){width=video.offsetWidth;height=video.offsetHeight;renderer=new libjass.renderers.DefaultRenderer(video,ass,{fontMap:libjass.renderers.RendererSettings.makeFontMapFromStyleElement(style)});renderer.resize(width,height);subtitleRenderers[id]={resize:function(){return renderer.resize.apply(renderer,arguments);},disableSubs:function(){return renderer.disable();},enableSubs:function(){return renderer.enable();}};if(video.parentElement.classList.contains('subs-off'))return renderer.disable();}};if(video.readyState<HTMLMediaElement.HAVE_METADATA)video.addEventListener('loadedmetadata',function(){return handleSubsReady(video,ass);},false);else handleSubsReady(video,ass);request=new XMLHttpRequest();request.open('GET',track.src||track.getAttribute('src'));request.onload=function(){ass=libjass.ASS.fromString(this.responseText);return handleSubsReady(video,ass);};request.send();}if(format==='vtt'){captionator.captionify(video,"en",{});subtitleRenderers[id]={resize:function(){},disableSubs:function(){return video.textTracks[0].mode='hidden';},enableSubs:function(){return video.textTracks[0].mode='showing';}};if(video.parentElement.classList.contains('subs-off'))return video.textTracks[0].mode='hidden';}})(player));}return _results;},false);}).call(this);(function(){window.updateSize=function(){var embed,size;if(window.mediaSizeReporter!=null){size=mediaSizeReporter();size.height+=5;embed=document.getElementById('embed-value');return embed.value='<iframe src="'+window.location.href+'/frame" frameborder="0" allowFullscreen width="'+size.width+'" height="'+size.height+'"></iframe>';}};window.addEventListener('DOMContentLoaded',function(){var box,canDelete,checkboxes,flags,hashIndex,history,i,input,inputs,report,_i,_j,_k,_len,_len1,_ref,_results;inputs=document.querySelectorAll('input.selectall');for(_i=0,_len=inputs.length;_i<_len;_i++){input=inputs[_i];input.addEventListener('mouseenter',function(e){e.target.focus();return e.target.select();},false);}document.getElementById('share-link').addEventListener('click',function(e){var embed,share;e.preventDefault();share=document.getElementById('share');embed=document.getElementById('embed');if(share.classList.contains('hidden')){share.classList.remove('hidden');return embed.classList.add('hidden');}else return share.classList.add('hidden');},false);document.getElementById('embed-link').addEventListener('click',function(e){var embed,share;e.preventDefault();share=document.getElementById('share');embed=document.getElementById('embed');if(embed.classList.contains('hidden')){embed.classList.remove('hidden');return share.classList.add('hidden');}else return embed.classList.add('hidden');},false);document.getElementById('delete').addEventListener('click',function(e){e.preventDefault();return confirm(function(a){if(!a)return;API.deleteFile(window.filename);return document.getElementById('delete').parentElement.innerHTML='Deleted';});},false);report=document.getElementById('report');report.addEventListener('click',function(e){e.preventDefault();return confirm(function(a){if(!a)return;API.reportFile(window.filename);return report.parentElement.innerHTML='Reported';});},false);if(window.location.hash==='#fromExtension'){window.history.pushState("",document.title,window.location.pathname);UserHistory.add(window.filename);}if(window.updateSize!=null)window.updateSize();canDelete=window.can_delete==='True';if(window.can_delete==='check'){history=UserHistory.getHistory();if(history){hashIndex=null;for(i=_j=0,_ref=history.length;0<=_ref?_j<_ref:_j>_ref;i=0<=_ref?++_j:--_j)if(history[i]===window.filename){canDelete=true;hashIndex=i;break;}}}if(canDelete){document.getElementById('delete').parentElement.classList.remove('hidden');flags=document.getElementById('flags');if(flags){flags.classList.remove('hidden');checkboxes=flags.querySelectorAll('input');_results=[];for(_k=0,_len1=checkboxes.length;_k<_len1;_k++){box=checkboxes[_k];_results.push((function(box){return box.addEventListener('change',function(e){var flag;flag=box.getAttribute('data-flag');window.flags[flag]=!window.flags[flag];API.setFlags(window.filename,window.flags);return updateFlag(flag,window.flags[flag]);});})(box));}return _results;}}},false);}).call(this);(function(){var ThreeDeePlayer,thingiurlbase;thingiurlbase=null;ThreeDeePlayer=function(containerid){var container,view;view=new Thingiview(containerid);console.log(view);view.setRotation(false);view.setObjectColor("#005580");view.setBackgroundColor("#fff");view.setShowPlane(false);view.initScene();container=document.getElementById(containerid);return view.loadSTL(container.dataset.object);};window.ThreeDeePlayer=ThreeDeePlayer;}).call(this);