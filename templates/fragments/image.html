<img src="/{{ original }}" alt="MediaQuick" id="image" />
{% if titledimensions is not defined %}
{% set titledimensions = True %}
{% if not mobile %}
<script>
    {% if mimetype.startswith('image') and mimetype != 'image/gif' %}
    window.addEventListener('load', function() {
        applyZoom();
        window.onresize = applyZoom;
        var image = document.getElementById('image');
        image.addEventListener('click', function(e) {
            zoomedOut = !zoomedOut;
            applyZoom();
        }, false);
    });
    var zoomedOut = true, titleSet = false;
    function applyZoom() {
        var image = document.getElementById('image');
        if (!titleSet) {
            titleSet = true;
            window.document.title = 'MediaCrush (' + image.width + ' x ' + image.height + ')';
        }
        if (zoomedOut) {
            var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName('body')[0],x=w.innerWidth||e.clientWidth||g.clientWidth,y=w.innerHeight||e.clientHeight||g.clientHeight;
            image.style.maxWidth = x + "px";
            image.style.maxHeight = y + "px";
            image.className = 'zout';
        } else {
            image.style.maxWidth = null;
            image.style.maxHeight = null;
            image.className = 'zin';
        }
    }
    {% endif %}
</script>
{% endif %}
{% endif %}
